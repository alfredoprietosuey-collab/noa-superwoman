<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Superwoman ‚Äî 30-Day Trading Challenge</title>
  <style>
    :root{
      --bg:#070A12;
      --panel:#0E1322;
      --panel2:#0B1020;
      --border:rgba(255,255,255,.10);
      --muted:rgba(255,255,255,.68);
      --text:rgba(255,255,255,.92);
      --good:#2ea043;
      --bad:#f85149;
      --empty:rgba(255,255,255,.06);
      --blue:#1f6feb;
      --shadow: 0 14px 40px rgba(0,0,0,.45);
      --radius:18px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 15% 0%, rgba(31,111,235,.35), transparent 60%),
        radial-gradient(900px 600px at 85% 10%, rgba(46,160,67,.22), transparent 55%),
        radial-gradient(900px 600px at 50% 100%, rgba(248,81,73,.16), transparent 55%),
        var(--bg);
    }
    .wrap{ max-width: 1020px; margin:0 auto; padding:18px; }

    .hero{
      display:flex; gap:14px; flex-wrap:wrap; align-items:flex-end; justify-content:space-between;
      margin-bottom:14px;
    }
    .title{
      margin:0;
      font-size:22px;
      letter-spacing:.2px;
      line-height:1.15;
    }
    .gradient{
      background: linear-gradient(90deg, rgba(255,255,255,.95), rgba(31,111,235,.95), rgba(46,160,67,.95));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .subtitle{
      margin-top:7px;
      font-size:13px;
      color:var(--muted);
      max-width: 760px;
    }
    .pills{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      backdrop-filter: blur(10px);
      padding:7px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
    }
    .pill strong{ color:var(--text); font-weight:700; }

    .grid{ display:grid; gap:12px; grid-template-columns: 1.25fr 1fr; }
    @media (max-width: 920px){ .grid{ grid-template-columns: 1fr; } }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06) 0%, rgba(255,255,255,.03) 100%);
      border:1px solid var(--border);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .space{ justify-content:space-between; }

    button, input { font: inherit; }
    button{
      border:0;
      border-radius: 14px;
      padding:10px 12px;
      cursor:pointer;
      color:#fff;
      background: linear-gradient(180deg, rgba(31,111,235,1), rgba(22,88,200,1));
      box-shadow: 0 10px 22px rgba(31,111,235,.18);
    }
    button.secondary{
      background: rgba(255,255,255,.06);
      color: var(--text);
      border:1px solid var(--border);
      box-shadow: none;
    }
    button.good{
      background: linear-gradient(180deg, rgba(46,160,67,1), rgba(30,130,52,1));
      box-shadow: 0 10px 22px rgba(46,160,67,.18);
    }
    button.bad{
      background: linear-gradient(180deg, rgba(248,81,73,1), rgba(197,52,46,1));
      box-shadow: 0 10px 22px rgba(248,81,73,.16);
    }
    button.danger{
      background: rgba(248,81,73,.12);
      border:1px solid rgba(248,81,73,.35);
      color: var(--text);
      box-shadow:none;
    }
    button:active{ transform: translateY(1px); }

    label{ display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
    input{
      width:100%;
      padding:10px 10px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: rgba(0,0,0,.18);
      color: var(--text);
      outline: none;
    }
    input:focus{ border-color: rgba(31,111,235,.6); box-shadow: 0 0 0 3px rgba(31,111,235,.15); }

    .split{ display:grid; gap:10px; grid-template-columns:1fr 1fr; }
    @media (max-width: 560px){ .split{ grid-template-columns:1fr; } }

    .stats{ display:grid; gap:10px; grid-template-columns: repeat(4, 1fr); margin-top:12px; }
    @media (max-width: 880px){ .stats{ grid-template-columns: repeat(2, 1fr); } }
    .stat{
      border:1px solid var(--border);
      border-radius: 16px;
      padding:10px;
      background: rgba(0,0,0,.14);
    }
    .k{ color:var(--muted); font-size:12px; }
    .v{ margin-top:4px; font-size:16px; font-weight:750; letter-spacing:.2px; }

    .progress-wrap{ margin-top:10px; }
    .progress-top{ display:flex; justify-content:space-between; gap:12px; align-items:center; }
    .tiny{ font-size:12px; color:var(--muted); }
    .ok{ color: rgba(126,231,135,.95); }
    .no{ color: rgba(255,180,180,.95); }

    .progress{
      height:11px;
      border-radius:999px;
      background: rgba(0,0,0,.18);
      border:1px solid var(--border);
      overflow:hidden;
      margin-top:8px;
    }
    .progress > div{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(46,160,67,1), rgba(31,111,235,1));
    }

    .calendar{
      display:grid;
      grid-template-columns: repeat(10, 1fr);
      gap:7px;
      margin-top:12px;
    }
    @media (max-width: 560px){ .calendar{ grid-template-columns: repeat(6, 1fr); } }

    .day{
      aspect-ratio: 1 / 1;
      border-radius: 14px;
      border:1px solid var(--border);
      background: var(--empty);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      color: rgba(255,255,255,.85);
      user-select:none;
      position:relative;
    }
    .day.good{ background: rgba(46,160,67,.22); border-color: rgba(46,160,67,.45); }
    .day.bad{ background: rgba(248,81,73,.18); border-color: rgba(248,81,73,.35); }
    .day.selected{ outline:2px solid rgba(31,111,235,.70); outline-offset:2px; }

    .hint{ margin-top:10px; font-size:12px; color:var(--muted); line-height:1.4; }

    hr{ border:0; border-top:1px solid var(--border); margin:14px 0; }

    .file{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div>
        <h1 class="title"><span class="gradient">Superwoman</span> ‚Äî 30-Day Trading Challenge üí™‚ú®</h1>
        <div class="subtitle">
          Start with <b>‚Ç¨30</b> and aim for <b>‚Ç¨49,365.14</b> in 30 days (28% daily, compounding).
          Tick each day: traded ‚úÖ or not ‚ùå. Optionally log your actual end-of-day balance.
        </div>
      </div>

      <div class="pills">
        <span class="pill" id="statusPill"><strong>Status:</strong> Not started</span>
        <button class="secondary" id="jumpTodayBtn">Go to today</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: Overview -->
      <div class="card">
        <div class="row space">
          <div class="row">
            <button id="startTodayBtn">Start today</button>
            <button class="secondary" id="setStartBtn">Set start date</button>
          </div>
          <button class="danger" id="resetBtn" title="This clears your progress on this device">Reset</button>
        </div>

        <div class="split" style="margin-top:12px;">
          <div>
            <label>Start date</label>
            <input type="date" id="startDateInput" />
            <div class="hint">Tip: click ‚ÄúStart today‚Äù to begin instantly.</div>
          </div>
          <div>
            <label>Challenge goal</label>
            <input type="text" id="goalInput" disabled />
            <div class="hint">Calculated as 30 √ó 1.28^30</div>
          </div>
        </div>

        <div class="stats">
          <div class="stat">
            <div class="k">Selected day</div>
            <div class="v" id="dayStat">‚Äî</div>
          </div>
          <div class="stat">
            <div class="k">Target for that day</div>
            <div class="v" id="targetStat">‚Äî</div>
          </div>
          <div class="stat">
            <div class="k">Streak (‚úÖ)</div>
            <div class="v" id="streakStat">‚Äî</div>
          </div>
          <div class="stat">
            <div class="k">Done</div>
            <div class="v" id="doneStat">‚Äî</div>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-top">
            <div class="tiny" id="progressText">‚Äî</div>
            <div class="tiny" id="onTrackText">‚Äî</div>
          </div>
          <div class="progress" aria-label="Challenge progress">
            <div id="progressBar"></div>
          </div>
        </div>

        <div class="calendar" id="calendar" aria-label="30-day calendar"></div>
        <div class="hint">Click a day to edit. Green = traded ‚úÖ ¬∑ Red = no ‚ùå ¬∑ Grey = not set.</div>
      </div>

      <!-- RIGHT: Day editor + backup -->
      <div class="card">
        <div class="row space" style="align-items:flex-start;">
          <div>
            <div style="font-weight:800; font-size:14px;">Daily log</div>
            <div class="tiny" id="editTitle">Select a day</div>
          </div>
          <button class="secondary" id="clearDayBtn" title="Clear this day (unset)">Clear day</button>
        </div>

        <div class="row" style="margin-top:12px;">
          <button class="good" id="tradeYesBtn">I traded today ‚úÖ</button>
          <button class="bad" id="tradeNoBtn">No trading ‚ùå</button>
        </div>

        <div class="split" style="margin-top:12px;">
          <div>
            <label>Actual end-of-day balance (optional)</label>
            <input inputmode="decimal" placeholder="e.g. 42.50" id="balanceInput" />
            <div class="hint">If filled, we‚Äôll compare it to the target for that day.</div>
          </div>
          <div>
            <label>Note (optional)</label>
            <input placeholder="e.g. ‚ÄòStuck to the plan‚Äô" id="noteInput" />
            <div class="hint">Keep it short. Consistency wins.</div>
          </div>
        </div>

        <div class="row space" style="margin-top:12px;">
          <button id="saveBtn">Save</button>
          <span class="tiny" id="saveMsg"></span>
        </div>

        <hr>

        <div style="font-weight:800; font-size:14px;">Backup</div>
        <div class="row space" style="margin-top:10px;">
          <button class="secondary" id="exportBtn">Export JSON</button>
          <div class="file">
            <input type="file" id="importFile" accept="application/json" />
            <button class="secondary" id="importBtn">Import</button>
          </div>
        </div>

        <div class="hint">
          Everything is stored locally in your browser (no accounts, no server).
          Export if you switch devices.
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  // Keep the same key so you don't lose your existing progress
  const LS_KEY = "superwoman_trading_tracker_v1";

  const cfg = { startAmount: 30, rate: 0.28, totalDays: 30 };
  const eur = (n) => new Intl.NumberFormat("en-GB", { style:"currency", currency:"EUR", maximumFractionDigits:2 }).format(n);
  const clamp = (n, a, b) => Math.max(a, Math.min(b, n));
  const todayISO = () => new Date().toISOString().slice(0,10);
  const midnight = (d) => new Date(d.getFullYear(), d.getMonth(), d.getDate());
  const daysBetween = (a, b) => Math.round((midnight(b) - midnight(a)) / (24*60*60*1000));

  const defaultState = () => ({
    startDate: null, // ISO yyyy-mm-dd
    selectedDay: 1,  // 1..30
    entries: Array.from({length: cfg.totalDays}, () => ({
      trade: null,    // true/false/null
      balance: null,  // number|null
      note: "",
      updatedAt: null
    }))
  });

  let state = load();

  // Elements
  const statusPill = document.getElementById("statusPill");
  const startTodayBtn = document.getElementById("startTodayBtn");
  const setStartBtn = document.getElementById("setStartBtn");
  const resetBtn = document.getElementById("resetBtn");
  const startDateInput = document.getElementById("startDateInput");
  const goalInput = document.getElementById("goalInput");
  const jumpTodayBtn = document.getElementById("jumpTodayBtn");

  const dayStat = document.getElementById("dayStat");
  const targetStat = document.getElementById("targetStat");
  const streakStat = document.getElementById("streakStat");
  const doneStat = document.getElementById("doneStat");
  const progressText = document.getElementById("progressText");
  const onTrackText = document.getElementById("onTrackText");
  const progressBar = document.getElementById("progressBar");

  const calendar = document.getElementById("calendar");
  const editTitle = document.getElementById("editTitle");
  const tradeYesBtn = document.getElementById("tradeYesBtn");
  const tradeNoBtn = document.getElementById("tradeNoBtn");
  const clearDayBtn = document.getElementById("clearDayBtn");
  const balanceInput = document.getElementById("balanceInput");
  const noteInput = document.getElementById("noteInput");
  const saveBtn = document.getElementById("saveBtn");
  const saveMsg = document.getElementById("saveMsg");

  const exportBtn = document.getElementById("exportBtn");
  const importBtn = document.getElementById("importBtn");
  const importFile = document.getElementById("importFile");

  // Init
  goalInput.value = eur(cfg.startAmount * Math.pow(1 + cfg.rate, cfg.totalDays));
  startDateInput.value = state.startDate || "";

  renderCalendar();
  renderAll();
  renderEditor();

  function load(){
    try{
      const raw = localStorage.getItem(LS_KEY);
      if(!raw) return defaultState();
      const parsed = JSON.parse(raw);
      if(!parsed.entries || !Array.isArray(parsed.entries) || parsed.entries.length !== cfg.totalDays) return defaultState();
      return {
        startDate: parsed.startDate || null,
        selectedDay: clamp(parsed.selectedDay || 1, 1, cfg.totalDays),
        entries: parsed.entries.map((e) => ({
          trade: (e.trade === true ? true : (e.trade === false ? false : null)),
          balance: (typeof e.balance === "number" ? e.balance : null),
          note: (typeof e.note === "string" ? e.note : ""),
          updatedAt: e.updatedAt || null
        }))
      };
    }catch{
      return defaultState();
    }
  }
  function save(){ localStorage.setItem(LS_KEY, JSON.stringify(state)); }

  function targetForDay(dayNumber){
    return cfg.startAmount * Math.pow(1 + cfg.rate, dayNumber);
  }

  function dayFromToday(){
    if(!state.startDate) return null;
    const start = new Date(state.startDate);
    const now = new Date();
    const idx = daysBetween(start, now); // 0 for same day
    return clamp(idx + 1, 1, cfg.totalDays);
  }

  function lastCompletedDay(){
    for(let i = cfg.totalDays-1; i >= 0; i--){
      if(state.entries[i].trade !== null) return i+1;
    }
    return 0;
  }

  function calcStreaks(){
    let best = 0, cur = 0;
    for(let i=0;i<cfg.totalDays;i++){
      if(state.entries[i].trade === true){ cur++; best = Math.max(best, cur); }
      else cur = 0;
    }
    let current = 0;
    const last = lastCompletedDay();
    for(let i=last-1; i>=0; i--){
      if(state.entries[i].trade === true) current++;
      else break;
    }
    return { current, best };
  }

  function countDone(){ return state.entries.filter(e => e.trade !== null).length; }

  function renderAll(){
    const todayDay = dayFromToday();
    const selected = state.selectedDay;

    if(!state.startDate){
      statusPill.innerHTML = "<strong>Status:</strong> Not started";
    } else {
      const last = lastCompletedDay();
      if(last >= cfg.totalDays){
        statusPill.innerHTML = "<strong>Status:</strong> Completed üéâ";
      } else if(todayDay){
        statusPill.innerHTML = `<strong>Status:</strong> In progress (today: day ${todayDay}/30)`;
      } else {
        statusPill.innerHTML = "<strong>Status:</strong> In progress";
      }
    }

    dayStat.textContent = `Day ${selected} / 30`;
    targetStat.textContent = eur(targetForDay(selected));

    const { current, best } = calcStreaks();
    streakStat.textContent = `${current} (best ${best})`;

    const done = countDone();
    doneStat.textContent = `${done} / 30`;

    const pct = Math.round((done / cfg.totalDays) * 100);
    progressText.textContent = `Progress: ${pct}%`;
    progressBar.style.width = `${pct}%`;

    const e = state.entries[selected-1];
    if(e.balance !== null){
      const diff = e.balance - targetForDay(selected);
      if(diff >= 0){
        onTrackText.textContent = `On track: +${eur(diff)}`;
        onTrackText.className = "tiny ok";
      } else {
        onTrackText.textContent = `Behind: ${eur(diff)}`;
        onTrackText.className = "tiny no";
      }
    } else {
      onTrackText.textContent = "Add actual balance to compare";
      onTrackText.className = "tiny";
    }

    startDateInput.value = state.startDate || "";
    paintCalendar();
    renderEditor();
  }

  function renderCalendar(){
    calendar.innerHTML = "";
    for(let d=1; d<=cfg.totalDays; d++){
      const div = document.createElement("div");
      div.className = "day";
      div.textContent = d;
      div.dataset.day = String(d);
      div.title = `Day ${d}`;
      div.addEventListener("click", () => {
        state.selectedDay = d;
        save();
        renderAll();
      });
      calendar.appendChild(div);
    }
  }

  function paintCalendar(){
    const nodes = calendar.querySelectorAll(".day");
    nodes.forEach(node => {
      const d = Number(node.dataset.day);
      const e = state.entries[d-1];
      node.classList.remove("good","bad","selected");
      if(e.trade === true) node.classList.add("good");
      if(e.trade === false) node.classList.add("bad");
      if(d === state.selectedDay) node.classList.add("selected");
    });
  }

  function renderEditor(){
    const d = state.selectedDay;
    const e = state.entries[d-1];
    editTitle.textContent = `Editing day ${d} ¬∑ Target: ${eur(targetForDay(d))}`;
    balanceInput.value = (e.balance === null ? "" : String(e.balance));
    noteInput.value = e.note || "";
  }

  function flash(text){
    saveMsg.textContent = text;
    setTimeout(() => saveMsg.textContent = "", 1200);
  }

  function setTrade(val){
    const e = state.entries[state.selectedDay-1];
    e.trade = val;
    e.updatedAt = new Date().toISOString();
    save();
    flash("Saved ‚úÖ");
    renderAll();
  }

  function clearDay(){
    state.entries[state.selectedDay-1] = { trade:null, balance:null, note:"", updatedAt:null };
    save();
    flash("Cleared");
    renderAll();
  }

  startTodayBtn.addEventListener("click", () => {
    state.startDate = todayISO();
    state.selectedDay = 1;
    save();
    renderAll();
    flash("Challenge started üöÄ");
  });

  setStartBtn.addEventListener("click", () => {
    const v = startDateInput.value;
    if(!v){ flash("Pick a date first"); return; }
    state.startDate = v;
    save();
    renderAll();
    flash("Start date saved");
  });

  resetBtn.addEventListener("click", () => {
    const ok = confirm("Reset everything on this device?");
    if(!ok) return;
    state = defaultState();
    save();
    renderAll();
    flash("Reset done");
  });

  jumpTodayBtn.addEventListener("click", () => {
    const d = dayFromToday();
    if(!d){ flash("Start the challenge first"); return; }
    state.selectedDay = d;
    save();
    renderAll();
    flash("Jumped to today");
  });

  tradeYesBtn.addEventListener("click", () => setTrade(true));
  tradeNoBtn.addEventListener("click", () => setTrade(false));
  clearDayBtn.addEventListener("click", clearDay);

  saveBtn.addEventListener("click", () => {
    const e = state.entries[state.selectedDay-1];
    const raw = balanceInput.value.trim().replace(",", ".");
    if(raw === "") e.balance = null;
    else {
      const num = Number(raw);
      if(!Number.isFinite(num) || num < 0){ flash("Invalid balance"); return; }
      e.balance = num;
    }
    e.note = noteInput.value.trim();
    e.updatedAt = new Date().toISOString();
    save();
    flash("Saved ‚úÖ");
    renderAll();
  });

  exportBtn.addEventListener("click", () => {
    const blob = new Blob([JSON.stringify(state, null, 2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "superwoman-trading-tracker-backup.json";
    document.body.appendChild(a);
    a.click();
    a.remove();
    setTimeout(() => URL.revokeObjectURL(a.href), 500);
  });

  importBtn.addEventListener("click", async () => {
    const file = importFile.files && importFile.files[0];
    if(!file){ flash("Choose a JSON file"); return; }
    try{
      const txt = await file.text();
      const parsed = JSON.parse(txt);
      if(!parsed.entries || !Array.isArray(parsed.entries) || parsed.entries.length !== cfg.totalDays){
        flash("Invalid JSON");
        return;
      }
      state = {
        startDate: parsed.startDate || null,
        selectedDay: clamp(parsed.selectedDay || 1, 1, cfg.totalDays),
        entries: parsed.entries.map((e) => ({
          trade: (e.trade === true ? true : (e.trade === false ? false : null)),
          balance: (typeof e.balance === "number" ? e.balance : null),
          note: (typeof e.note === "string" ? e.note : ""),
          updatedAt: e.updatedAt || null
        }))
      };
      save();
      renderAll();
      flash("Imported ‚úÖ");
    } catch {
      flash("Could not read that JSON");
    }
  });

})();
</script>
</body>
</html>

